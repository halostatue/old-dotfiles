[user]
  name = <%= user_id["name"] %>
  email = <%= user_id["email"] %>

[diff "ruby"]
  funcname = ^ *\\(\\(class\\|module\\|def\\) .*\\)

[core]
  excludesfile = <%= ENV["HOME"] %>/.gitignore
  pager = less -FRSX
  whitespace=trailing-space,tab-in-indent,cr-at-eol,space-before-tab
  autocrlf = input
  safecrlf = true

[merge]
  tool = gvimdiff

[mergetool "gvimdiff"]
  cmd = gvim -d --remote-wait-silent "${LOCAL}" "${MERGED}" "${REMOTE}"
  trustExitCode = true

[mergetool "vimdiff"]
  cmd = vim -d "${LOCAL}" "${MERGED}" "${REMOTE}"
  trustExitCode = true

[format]
  pretty = %C(yellow)%h%Creset %C(red)%ad%Creset | %s%d %C(green)[%aN]%Creset

[log]
  date = short

[alias]
  # Simple functionality extension
  cat         = -p cat-file -p
  dump        = cat-file -p
  last        = cat-file commit HEAD
  type        = cat-file -t
  co          = checkout
  rclone      = clone --reference /git/cache.git/
  stc         = diff --stat --name-status --cached
  fast-amend  = commit --amend -C HEAD
  hardreset   = reset --hard HEAD
  uncommit    = reset --soft HEAD^
  unref       = reset --soft HEAD@{1}
  findnext    = rev-list --reverse -n1 HEAD..master
  review      = merge --no-ff --no-commit
  sa          = status -sb --ignore-submodules=untracked
  sm          = status -sb -uno --ignore-submodules=untracked
  ll          = log --pretty=oneline --abbrev-commit --max-count=15
  hist        = log --pretty=format:'%h %ad | %s%d [%an]' --graph --date=short
  lg          = log --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cd)%Creset' --abbrev-commit --date=short
  longline    = log --abbrev-commit --graph --pretty=format:'%C(yellow bold)%h%Creset by %C(red)%an%Creset (%ar)%C(cyan bold)%d%Creset%n%s%n%b' --all
  standup     = shortlog --since=yesterday
  today       = shortlog --since=midnight
  who         = shortlog -s -n --no-merges
  subdo       = submodule foreach git
  vgc         = repack -f -a -d --depth=250 --window=250

  # More complex functionality
  add-unmerged      = !git add $(git ls-files --unmerged | cut -f2 | sort -u)
  checkoutnext      = !git checkout $(git findnext)
  datetag           = !git tag $(date '+%Y%m%d%H%M')-1
  debug             = !GIT_PAGER= gdb --args git
  edit-last-commit  = !$EDITOR $(git diff-tree -r --name-only 'HEAD' 'HEAD~1')
  edit-unmerged     = !$EDITOR $(git ls-files --unmerged | cut -f2 | sort -u)
  file-blame        = !git ls-files | xargs -n1 -I{} git log -1 --pretty=format:'%ci {}' -- {}
  push-head         = !git push origin $(git symbolic-ref HEAD)
  pushall           = !git remote | xargs -n1 git push
  pushalltags       = !git remote | xargs -n1 git push --tags
  subup             = !git submodule foreach git checkout master && git submodule foreach git pull
  top               = !eval cd "$(pwd)/$(git rev-parse --show-cdup)" && pwd

  # Aliases to allow for the completion of helper functions
  amend            = !git-amend
  browse           = !hub browse
  compare          = !hub compare
  conflicts        = !git-conflicts
  cut-branch       = !git-cut-branch
  sh               = !git-sh
  grab             = !git-grab
  thanks           = !git-thanks
  track            = !git-track
  remove-submodule = !git-remove-submodule
  incoming         = !git-incoming
  outgoing         = !git-outgoing

[advice]
  statusHints = false

[color]
  pager = true
  ui = auto

[color "diff"]
  meta = blue bold
  frag = magenta bold
  old = red bold
  new = green bold

[color "branch"]
  current = yellow reverse
  local = yellow bold
  remote = green bold
  plain = red bold

[color "status"]
  added = yellow
  changed = green bold
  untracked = blue bold


[diff]
  mnemonicprefix = true
  renames = copies

[pack]
  threads = 0

[gc]
  reflogexpire = 300
  reflogexpireunreachable = 90

[github]
  user = <%= user_id["github_user"] %>

<%= include_file "platform/gitconfig.{PLATFORM}" %>

# vim: ft=gitconfig
