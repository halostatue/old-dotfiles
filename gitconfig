[user]
  name = <%= user_id["name"] %>
  email = <%= user_id["email"] %>

[diff "ruby"]
  funcname = ^ *\\(\\(class\\|module\\|def\\) .*\\)

[core]
  excludesfile = <%= ENV["HOME"] %>/.gitignore
  pager = less -FRSX
  whitespace=fix,-indent-with-non-tab,trailing-space,cr-at-eol
  autocrlf = input
  safecrlf = true

[merge]
  tool = gvimdiff

[mergetool "gvimdiff"]
  cmd = gvim -d --remote-wait-silent "${LOCAL}" "${MERGED}" "${REMOTE}"
  trustExitCode = true

[mergetool "vimdiff"]
  cmd = vim -d "${LOCAL}" "${MERGED}" "${REMOTE}"
  trustExitCode = true

[format]
  pretty = %C(yellow)%h%Creset %C(red)%ad%Creset | %s%d %C(green)[%aN]%Creset

[log]
  date = short

[alias]
  add-unmerged = "!f() { git ls-files --unmerged | cut -f2 | sort -u ; }; git add $(f)"
  amend = commit --amend -C HEAD
  cat = -p cat-file -p
  checkoutnext = !git checkout $(git findnext)
  co = checkout
  debug = !GIT_PAGER= gdb --args git
  dump = cat-file -p
  edit-last-commit = !vim $(git diff-tree -r --name-only "HEAD" "HEAD~1")
  edit-unmerged = "!f() { git ls-files --unmerged | cut -f2 | sort -u ; }; vim $(f)"
  file-blame = !git ls-files | xargs -n1 -I{} git log -1 --pretty=format:\"%ci {}\" -- {}
  findnext = rev-list --reverse -n1 HEAD..master
  hardreset = reset --hard HEAD
  hist = log --pretty=format:\"%h %ad | %s%d [%an]\" --graph --date=short
  last = cat-file commit HEAD
  lg = log --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cd)%Creset' --abbrev-commit --date=short
  lga = log --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cd)%Creset' --abbrev-commit --date=short
# nvgc = !ionice -n7 nice -n20 git vgc
  publish = push publish
  push-head = !git push origin $(git symbolic-ref HEAD)
  pushall = !git remote | xargs -n1 git push
  pushalltags = !git remote | xargs -n1 git push --tags
  rclone = clone --reference /git/cache.git/
  review = merge --no-ff --no-commit
  st = ls-files --exclude-per-directory=.gitignore --exclude-from=.git/info/exclude -t -o -u -s -m -d
  standup = shortlog --since=yesterday
  stc = diff --stat --name-status --cached
  subdo = submodule foreach git
  subup = !git submodule foreach git checkout master && git submodule foreach git pull
  svnup = !git config --get-regexp 'svn-remote.*url' | cut -d . -f 2 | xargs -n1 git svn fetch
  tbk   = !gitk --not-grep='Auto-increment of build number due to changes in directory '
  tblog = log --not-grep='Auto-increment of build number due to changes in directory '
  today = shortlog --since=midnight
  top = !eval cd "$(pwd)/$(git rev-parse --show-cdup)" && pwd
  type = cat-file -t
  uncommit = reset --soft HEAD^
  unref = reset --soft HEAD@{1}
  up = !git remote update && git gc
  vgc = repack -f -a -d --depth=250 --window=250
  who = shortlog -s -n --no-merges

[color]
  pager = true
  diff = auto
  status = auto
  branch = auto

[pack]
  threads = 4

[push]
  default = matching

[web]
  browser = open

[gc]
  reflogexpire = 300
  reflogexpireunreachable = 90

[github]
  user = <%= user_id["github_user"] %>
  token = <%= user_id["github_token"] %>

<%= include_file "include/gitconfig.{PLATFORM}" %>

# vim: ft=gitconfig
