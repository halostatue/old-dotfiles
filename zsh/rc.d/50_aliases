#! /bin/zsh

if has sudo; then
  function su() { export XAUTHORITY=${HOME}/.Xauthority; command sudo -s; }
  function sudo() { export XAUTHORITY=${HOME}/.Xauthority; command sudo; }
fi

alias du="du -hcs"
alias df="df -h"

alias ls="ls -F"
alias l="ls -lFh"
alias ll="ls -lAF"
alias la='ls -AF'
alias lla="ls -lAF"
alias lsf="ls -sF"
alias ltr="ls -ltrF"

function wt() { while true; do (${@}); sleep 1; clear; done; }

function bdiff() { diff "${1}" "${2}" || diff <(hex "${1}") <(hex "${2}"); }

function tohtml() {
  if [ -z ${1} ]; then
    echo "tohtml <file>" >&2
    return 1
  fi
  vim -e +:TOhtml +w +qa ${1}
}

function yyyymmdd() { date +%Y%m%d; }
function yyyymmdd-hhmmss() { date +%Y%m%d-%H%M%S; }
alias ymd=yyyymmdd
alias ymd-hms=yyyymmdd-hhmmss

if has mvim; then
  function mvman() { mvim -c ":RMan ${*}"; }
  function gvman() { mvim -c ":RMan ${*}"; }
elif has gvim; then
  function mvman() { gvim -c ":RMan ${*}"; }
  function gvman() { gvim -c ":RMan ${*}"; }
fi

function vman() { vim -c ":RMan ${*}"; }
function vimgrep() { tmp="${@}"; vim -c "vimgrep ${tmp}"; }

if has xclip; then
  function xpwd() { echo ${PWD} | xclip -i; xclip -o; }
  function xcd() { cd `xclip -o`; }
fi

function sum() { SUM=0; while read NUM; do SUM=$((${SUM}+${NUM})); done; echo ${SUM}; }

# cdd x will do cd ../x but with an absolute path
function cdd() {
  local target
  target=$(dirname $(pwd))
  cd ${target}/${1}
}
alias ..='cd ..'

alias aliases=alias
alias h=history
alias j=jobs

alias cleanf='clean -f'
alias cleanrf='clean -rf'
alias keep='noglob keep'
